{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const fetchImages = (searchedQuery, currentPage) => {\n    const axiosOptions = {\n        params: {\n            q: searchedQuery,\n            page: currentPage,\n            per_page: 15,\n            key:'48292364-ad13d53928d4b39a49844bb07',\n        },\n    };\n    return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n    \n\n  \n","import iziToast from \"izitoast\";\n\nexport const createGalleryImgTemplate = imgInfo => {\n    return `\n        <li class=\"gallery-card\">\n            <a href=\"${imgInfo.largeImageURL}\">\n                <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"/>\n            </a>\n            <div class=\"info\">\n                <p>Likes: ${imgInfo.likes}</p>\n                <p>Views: ${imgInfo.views}</p>\n                <p>Comments: ${imgInfo.comments}</p>\n                <p>Downloads: ${imgInfo.downloads}</p>\n            </div>\n        </li>`;\n};\n\nexport const showAlert = message => {\n    iziToast.show({\n        title: '❌',\n        message: message,\n        position: 'topRight',\n        timeout: 3000,\n    });\n};","import SimpleLightbox from \"simplelightbox\";\nimport { fetchImages } from './js/pixabay-api.js';\nimport { createGalleryImgTemplate, showAlert } from './js/render-functions.js';\n\nconst formSearch = document.querySelector('.form');\nconst galleryEl = document.querySelector('.search-list');\nconst btnLoadMore = document.querySelector('.js-btn-load');\nconst loader = document.querySelector('.loader');\n\nlet page = 1;\nlet searchedQuery = '';\nlet totalPages = 0;\n\nconst onFormSubmit =  async event => {\n        event.preventDefault();      \n        searchedQuery = event.currentTarget.elements.search.value.trim();\n\n    if (searchedQuery === '') {\n        showAlert('Enter text to search!');\n        return;\n    }\n        page = 1;\n        loader.classList.add('active');\n        galleryEl.innerHTML = '';\n        btnLoadMore.classList.add('is-hidden');\n    \n    try {\n        const { data } = await fetchImages(searchedQuery, page);\n\n       if (data.hits.length === 0) {\n            showAlert('Sorry, there are no images matching your search query. Please try again!');\n            \n            formSearch.reset();\n            return;\n        }\n\n        totalPages = data.totalHits;\n\n        const imagesCardsTemplate = data.hits.map(el => createGalleryImgTemplate(el)).join('');\n        galleryEl.innerHTML = imagesCardsTemplate;\n \n        const lightbox = new SimpleLightbox('.gallery-card a', {\n            captionDelay: 250,\n            captionsData: 'alt',\n        });\n\n        lightbox.refresh();\n       \n        if (totalPages > 1) {\n            btnLoadMore.classList.remove('is-hidden')\n        };\n        \n   } catch (err) {\n       console.log(err);\n       \n    } finally {\n        loader.classList.remove('active');\n   }\n};\n\nformSearch.addEventListener('submit', onFormSubmit);\n\nconst onLoadMoreBtnClick = async () => {\n    if (page < totalPages) {\n        page++;\n        loader.classList.add('active');\n     };\n        \n try {\n        const { data } = await fetchImages(searchedQuery, page, 15);\n        const galleryTemplate = data.hits.map(el => createGalleryImgTemplate(el)).join('');\n        galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n\n      const lightbox = new SimpleLightbox('.gallery-card a', {\n            captionDelay: 250,\n            captionsData: 'alt',\n        });\n\n     lightbox.refresh();\n     \n        if (page >= totalPages) { \n            btnLoadMore.classList.add('is-hidden');\n            showAlert( \"We're sorry, but you've reached the end of search results.\");\n            btnLoadMore.removeEventListener('click', onLoadMoreBtnClick);\n           \n        };\n\n} catch (err) {\n    console.log(err);\n } finally {\n     loader.classList.remove('active');\n}\n};\nbtnLoadMore.addEventListener('click', onLoadMoreBtnClick);"],"names":["fetchImages","searchedQuery","currentPage","axiosOptions","axios","createGalleryImgTemplate","imgInfo","showAlert","message","iziToast","formSearch","galleryEl","btnLoadMore","loader","page","totalPages","onFormSubmit","event","data","imagesCardsTemplate","el","SimpleLightbox","err","onLoadMoreBtnClick","galleryTemplate"],"mappings":"owBAEO,MAAMA,EAAc,CAACC,EAAeC,IAAgB,CACvD,MAAMC,EAAe,CACjB,OAAQ,CACJ,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,IAAI,oCACP,CACT,EACI,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC7D,ECVaE,EAA2BC,GAC7B;AAAA;AAAA,uBAEYA,EAAQ,aAAa;AAAA,4BAChBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,4BAG1CA,EAAQ,KAAK;AAAA,4BACbA,EAAQ,KAAK;AAAA,+BACVA,EAAQ,QAAQ;AAAA,gCACfA,EAAQ,SAAS;AAAA;AAAA,eAKpCC,EAAYC,GAAW,CAChCC,EAAS,KAAK,CACV,MAAO,IACP,QAASD,EACT,SAAU,WACV,QAAS,GACjB,CAAK,CACL,ECpBME,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAO,EACPb,EAAgB,GAChBc,EAAa,EAEjB,MAAMC,EAAgB,MAAMC,GAAS,CAIjC,GAHIA,EAAM,eAAc,EACpBhB,EAAgBgB,EAAM,cAAc,SAAS,OAAO,MAAM,OAE1DhB,IAAkB,GAAI,CACtBM,EAAU,uBAAuB,EACjC,MACH,CACGO,EAAO,EACPD,EAAO,UAAU,IAAI,QAAQ,EAC7BF,EAAU,UAAY,GACtBC,EAAY,UAAU,IAAI,WAAW,EAEzC,GAAI,CACA,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMlB,EAAYC,EAAea,CAAI,EAEvD,GAAII,EAAK,KAAK,SAAW,EAAG,CACvBX,EAAU,0EAA0E,EAEpFG,EAAW,MAAK,EAChB,MACH,CAEDK,EAAaG,EAAK,UAElB,MAAMC,EAAsBD,EAAK,KAAK,IAAIE,GAAMf,EAAyBe,CAAE,CAAC,EAAE,KAAK,EAAE,EACrFT,EAAU,UAAYQ,EAEL,IAAIE,EAAe,kBAAmB,CACnD,aAAc,IACd,aAAc,KAC1B,CAAS,EAEQ,QAAO,EAEZN,EAAa,GACbH,EAAY,UAAU,OAAO,WAAW,CAGhD,OAAQU,EAAK,CACV,QAAQ,IAAIA,CAAG,CAEtB,QAAc,CACNT,EAAO,UAAU,OAAO,QAAQ,CACpC,CACJ,EAEAH,EAAW,iBAAiB,SAAUM,CAAY,EAElD,MAAMO,EAAqB,SAAY,CAC/BT,EAAOC,IACPD,IACAD,EAAO,UAAU,IAAI,QAAQ,GAGpC,GAAI,CACG,KAAM,CAAE,KAAAK,CAAI,EAAK,MAAMlB,EAAYC,EAAea,EAAM,EAAE,EACpDU,EAAkBN,EAAK,KAAK,IAAIE,GAAMf,EAAyBe,CAAE,CAAC,EAAE,KAAK,EAAE,EACjFT,EAAU,mBAAmB,YAAaa,CAAe,EAE1C,IAAIH,EAAe,kBAAmB,CACjD,aAAc,IACd,aAAc,KAC1B,CAAS,EAEK,QAAO,EAETP,GAAQC,IACRH,EAAY,UAAU,IAAI,WAAW,EACrCL,EAAW,4DAA4D,EACvEK,EAAY,oBAAoB,QAASW,CAAkB,EAIvE,OAASD,EAAK,CACV,QAAQ,IAAIA,CAAG,CACnB,QAAW,CACNT,EAAO,UAAU,OAAO,QAAQ,CACrC,CACA,EACAD,EAAY,iBAAiB,QAASW,CAAkB"}