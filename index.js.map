{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const fetchImages = (searchedQuery, currentPage) => {\n    const axiosOptions = {\n        params: {\n            q: searchedQuery,\n            page: currentPage,\n            per_page: 15,\n            key:'48292364-ad13d53928d4b39a49844bb07',\n        },\n    };\n    return axios.get(`https://pixabay.com/api/`, axiosOptions);\n};\n    \n\n  \n","import iziToast from \"izitoast\";\n\nexport const createGalleryImgTemplate = imgInfo => {\n    return `\n        <li class=\"gallery-card\">\n            <a href=\"${imgInfo.largeImageURL}\">\n                <img src=\"${imgInfo.webformatURL}\" alt=\"${imgInfo.tags}\"/>\n            </a>\n            <div class=\"info\">\n                <p>Likes: ${imgInfo.likes}</p>\n                <p>Views: ${imgInfo.views}</p>\n                <p>Comments: ${imgInfo.comments}</p>\n                <p>Downloads: ${imgInfo.downloads}</p>\n            </div>\n        </li>`;\n};\n\nexport const showAlert = message => {\n    iziToast.show({\n        title: '❌',\n        message: message,\n        position: 'topRight',\n        timeout: 3000,\n    });\n};\n","import SimpleLightbox from \"simplelightbox\";\nimport { fetchImages } from './js/pixabay-api.js';\nimport { createGalleryImgTemplate, showAlert } from './js/render-functions.js';\n\nconst formSearch = document.querySelector('.form');\nconst galleryEl = document.querySelector('.search-list');\nconst btnLoadMore = document.querySelector('.js-btn-load');\nconst loader = document.querySelector('.loader');\n\nlet page = 1;\nlet searchedQuery = '';\nlet totalPages = 0;\n\nconst lightbox = new SimpleLightbox('.gallery-card a', {\n            captionDelay: 250,\n            captionsData: 'alt',\n});\n        \nconst onFormSubmit =  async event => {\n        event.preventDefault();      \n        searchedQuery = event.currentTarget.elements.search.value.trim();\n   \n    if (searchedQuery === '') {\n        showAlert('Enter text to search!');\n\n        return;\n    }\n    page = 1;\n    loader.classList.add('active');\n    btnLoadMore.classList.add('is-hidden');\n    \n    try {\n        const { data } = await fetchImages(searchedQuery, page);\n\n        \n       if (data.hits.length === 0) {\n           \n           showAlert('Sorry, there are no images matching your search query. Please try again!');\n           galleryEl.innerHTML = '';\n           formSearch.reset();\n           \n            return;\n        }\n        \n        totalPages = Math.ceil(data.totalHits / 15);\n\n        const imagesCardsTemplate = data.hits.map(el => createGalleryImgTemplate(el)).join('');\n        galleryEl.innerHTML = imagesCardsTemplate;\n\n        if (data.totalHits > 15) {\n             btnLoadMore.classList.remove('is-hidden');\n        };\n     \n        lightbox.refresh();\n\n   } catch (err) {\n       console.log(err);\n       showAlert('Something went wrong. Please try again later.');\n    } finally {\n        loader.classList.remove('active');\n   }\n};\n\nformSearch.addEventListener('submit', onFormSubmit);\n\nconst onLoadMoreBtnClick = async event => {    \n    try {\n        page++;\n        \n        const { data } = await fetchImages(searchedQuery, page);\n\n        if (data.hits.length === 0 || page >= totalPages) { \n            btnLoadMore.classList.add('is-hidden');\n            showAlert(\"We're sorry, but you've reached the end of search results.\");\n           \n            return;\n        }\n        \n        const galleryTemplate = data.hits.map(el => createGalleryImgTemplate(el)).join('');\n        galleryEl.insertAdjacentHTML('beforeend', galleryTemplate);\n     \n        lightbox.refresh();\n        \n        const imgCard = galleryEl.querySelector('.gallery-card');\n        \n     if (imgCard) { \n         const imgCardHeigth = imgCard.getBoundingClientRect().height;\n            \n            window.scrollBy({\n            top: imgCardHeigth * 2,\n            behavior: 'smooth' \n         });\n     };\n\n\n} catch (err) {\n        console.log(err);\n        showAlert('Something went wrong. Please try again later.');\n\n } finally {\n     loader.classList.remove('active');\n}\n};\nbtnLoadMore.addEventListener('click', onLoadMoreBtnClick);"],"names":["fetchImages","searchedQuery","currentPage","axiosOptions","axios","createGalleryImgTemplate","imgInfo","showAlert","message","iziToast","formSearch","galleryEl","btnLoadMore","loader","page","totalPages","lightbox","SimpleLightbox","onFormSubmit","event","data","imagesCardsTemplate","el","err","onLoadMoreBtnClick","galleryTemplate","imgCard","imgCardHeigth"],"mappings":"owBAEO,MAAMA,EAAc,CAACC,EAAeC,IAAgB,CACvD,MAAMC,EAAe,CACjB,OAAQ,CACJ,EAAGF,EACH,KAAMC,EACN,SAAU,GACV,IAAI,oCACP,CACT,EACI,OAAOE,EAAM,IAAI,2BAA4BD,CAAY,CAC7D,ECVaE,EAA2BC,GAC7B;AAAA;AAAA,uBAEYA,EAAQ,aAAa;AAAA,4BAChBA,EAAQ,YAAY,UAAUA,EAAQ,IAAI;AAAA;AAAA;AAAA,4BAG1CA,EAAQ,KAAK;AAAA,4BACbA,EAAQ,KAAK;AAAA,+BACVA,EAAQ,QAAQ;AAAA,gCACfA,EAAQ,SAAS;AAAA;AAAA,eAKpCC,EAAYC,GAAW,CAChCC,EAAS,KAAK,CACV,MAAO,IACP,QAASD,EACT,SAAU,WACV,QAAS,GACjB,CAAK,CACL,ECpBME,EAAa,SAAS,cAAc,OAAO,EAC3CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,cAAc,EACnDC,EAAS,SAAS,cAAc,SAAS,EAE/C,IAAIC,EAAO,EACPb,EAAgB,GAChBc,EAAa,EAEjB,MAAMC,EAAW,IAAIC,EAAe,kBAAmB,CAC3C,aAAc,IACd,aAAc,KAC1B,CAAC,EAEKC,EAAgB,MAAMC,GAAS,CAIjC,GAHIA,EAAM,eAAc,EACpBlB,EAAgBkB,EAAM,cAAc,SAAS,OAAO,MAAM,OAE1DlB,IAAkB,GAAI,CACtBM,EAAU,uBAAuB,EAEjC,MACH,CACDO,EAAO,EACPD,EAAO,UAAU,IAAI,QAAQ,EAC7BD,EAAY,UAAU,IAAI,WAAW,EAErC,GAAI,CACA,KAAM,CAAE,KAAAQ,CAAI,EAAK,MAAMpB,EAAYC,EAAea,CAAI,EAGvD,GAAIM,EAAK,KAAK,SAAW,EAAG,CAExBb,EAAU,0EAA0E,EACpFI,EAAU,UAAY,GACtBD,EAAW,MAAK,EAEf,MACH,CAEDK,EAAa,KAAK,KAAKK,EAAK,UAAY,EAAE,EAE1C,MAAMC,EAAsBD,EAAK,KAAK,IAAIE,GAAMjB,EAAyBiB,CAAE,CAAC,EAAE,KAAK,EAAE,EACrFX,EAAU,UAAYU,EAElBD,EAAK,UAAY,IAChBR,EAAY,UAAU,OAAO,WAAW,EAG7CI,EAAS,QAAO,CAEpB,OAAQO,EAAK,CACV,QAAQ,IAAIA,CAAG,EACfhB,EAAU,+CAA+C,CAChE,QAAc,CACNM,EAAO,UAAU,OAAO,QAAQ,CACpC,CACJ,EAEAH,EAAW,iBAAiB,SAAUQ,CAAY,EAElD,MAAMM,EAAqB,MAAML,GAAS,CACtC,GAAI,CACAL,IAEA,KAAM,CAAE,KAAAM,CAAI,EAAK,MAAMpB,EAAYC,EAAea,CAAI,EAEtD,GAAIM,EAAK,KAAK,SAAW,GAAKN,GAAQC,EAAY,CAC9CH,EAAY,UAAU,IAAI,WAAW,EACrCL,EAAU,4DAA4D,EAEtE,MACH,CAED,MAAMkB,EAAkBL,EAAK,KAAK,IAAIE,GAAMjB,EAAyBiB,CAAE,CAAC,EAAE,KAAK,EAAE,EACjFX,EAAU,mBAAmB,YAAac,CAAe,EAEzDT,EAAS,QAAO,EAEhB,MAAMU,EAAUf,EAAU,cAAc,eAAe,EAE1D,GAAIe,EAAS,CACT,MAAMC,EAAgBD,EAAQ,sBAAqB,EAAG,OAEnD,OAAO,SAAS,CAChB,IAAKC,EAAgB,EACrB,SAAU,QACtB,CAAU,CACV,CAGA,OAASJ,EAAK,CACN,QAAQ,IAAIA,CAAG,EACfhB,EAAU,+CAA+C,CAEjE,QAAW,CACNM,EAAO,UAAU,OAAO,QAAQ,CACrC,CACA,EACAD,EAAY,iBAAiB,QAASY,CAAkB"}